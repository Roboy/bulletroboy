#!/usr/bin/bash

TOPIC="/exoforce/control/initialize_request"
MSGTYPE="roboy_middleware_msgs/InitExoforceRequest"

POSELEFT="{position: {x: -0.14829842746257782, y: 0.6122045516967773, z: 0.39584545195102694}, orientation: {x: 0.0976242795586586, y: 0.1263940930366516, z: -0.8053148984909058, w: 0.5709308385848999}}"
POSERIGHT="{position: {x: 0.17322880029678345, y: 0.641670823097229, z: 0.40152866542339327}, orientation: {x: -0.1135825663805008, y: -0.09424448758363724, z: -0.7904344797134399, w: 0.5945000052452087}}"

OPERATORHEIGHT=1.7

TORSO="{id: -1, name: torso, dimensions: {x: 0.29448722839355485, y: 0.5503526000976564, z: 0.44964163208007824}, init_pose: {position: {x: -0.0028199999999999987, y: 0.0077599999999999995,z: 1.6265800000000001}, orientation: {x: -0.0, y: -0.0, z: 0.7071067811865476, w: 0.7071067811865476}}}"
RIGHTUPPERARM="{id: 2, name: upperarm_right, dimensions: {x: 0.18532469749656916, y: 0.10607259860798174, z: 0.3633495159566351}, init_pose: {position: {x: -0.0013785618090860414, y: -0.22132000035696997, z: 1.5244799886868452}, orientation: {x: -2.8738953285506973e-06, y: -2.8796251614577413e-06, z: 0.7071072361565448, w: 0.7071063262045538}}}"
RIGHTLOWERARM="{id: 4, name: lowerarm_right, dimensions: {x: 0.10400020187332888, y: 0.10696281697830459, z: 0.2874445758933266}, init_pose: {position: {x: 0.0011863649344188015, y: -0.21813999431152353, z: 1.1855401200307434}, orientation: {x: -3.609884164019404e-05, y: -3.6104614229190885e-05, z: 0.7071072352406649, w: 0.7071063252889438}}}"
RIGHTHAND="{id: 7, name: hand_right, dimensions: {x: 0.08545025952592443, y: 0.06778127982727597, z: 0.14556626734533895}, init_pose: {position: {x: -0.0010279856413049232, y: -0.22202998699382695, z: 1.025369904553858}, orientation: {x: -3.239306574804571e-05, y: -3.235462036050524e-05, z: 0.7071029803138211, w: 0.7071105805566622}}}"
LEFTUPPERARM="{id: 15, name: upperarm_left, dimensions: {x: 0.18508520132444017, y: 0.10577784915711169, z: 0.6387648859306352}, init_pose: {position: {x: -0.00133982226472656, y: 0.22121000011678416, z: 1.5135999987256679}, orientation: {x: -3.369279168629203e-07, y: -3.3711531865471613e-07, z: 0.7071067633694199, w: 0.707106799003514}}}"
LEFTLOWERARM="{id: 17, name: lowerarm_left, dimensions: {x: 0.10423879873892365, y: 0.10730537565840043, z: 0.28770309485187084}, init_pose: {position: {x: 0.001297144722546592, y: 0.21822000006586834, z: 1.2043300757289064}, orientation: {x: -2.0707769466238722e-05, y: -2.0707955841457813e-05, z: 0.7071067630662794, w: 0.7071067987003785}}}"
LEFTHAND="{id: 20, name: hand_left, dimensions: {x: 0.08544346104393218, y: 0.06778052926424383, z: 0.14560813390263005}, init_pose: {position: {x: -0.0010429794293806858, y: 0.22205999898039158, z: 1.0253699486861305}, orientation: {x: -1.7286343020038602e-05, y: -1.7297969103105185e-05, z: 0.7071075139834778, w: 0.7071060479659811}}}"
HEAD="{id: 10, name: head, dimensions: {x: 0.32785658264160167, y: 0.281394352936054, z: 0.3330958099365233}, init_pose: {position: {x: 0.018140000000000003, y: -0.00020000000000000833, z: 1.9914500000000002}, orientation: {x: -0.0, y: -0.0, z: 0.7071067811865476, w: 0.7071067811865476}}}"

# Publish init msg to exoforce
ros2 topic pub $TOPIC $MSGTYPE "{ef_name: ['left_hand', 'right_hand'], ef_enabled: [True, True], ef_init_pose: [$POSELEFT, $POSERIGHT], operator_height: $OPERATORHEIGHT, roboy_link_information: [$TORSO, $RIGHTUPPERARM, $RIGHTLOWERARM, $RIGHTHAND, $LEFTUPPERARM, $LEFTLOWERARM, $LEFTHAND, $HEAD]}"

# link_information: 
#     - 
#       id: 0
#       name: "shoulder_right_link1"
#       dimensions: 
#         x: 0.03201431539983046
#         y: 0.03200848705980597
#         z: 0.032008684216096484
#       init_pose: 
#         position: 
#           x: -8.890457814381136e-17
#           y: -0.21016999999999997
#           z: 1.6994700000000003
#         orientation: 
#           x: -2.830912651248611e-06
#           y: -2.83091265124861e-06
#           z: 0.7071074347452416
#           w: 0.7071061276159157
#     - 
#       id: 1
#       name: "shoulder_right_link2"
#       dimensions: 
#         x: 0.016006157280080625
#         y: 0.015998715554576215
#         z: 0.016003685494692554
#       init_pose: 
#         position: 
#           x: -8.890457814381136e-17
#           y: -0.21016999999999997
#           z: 1.6994700000000003
#         orientation: 
#           x: -2.828048569576662e-06
#           y: -2.8337767276261376e-06
#           z: 0.7071074347452532
#           w: 0.7071061276159042
    # - 
    #   id: 3
    #   name: "elbow_right"
    #   dimensions: 
    #     x: 0.06793278451481365
    #     y: 0.03865009366178823
    #     z: 0.11125181121168604
    #   init_pose: 
    #     position: 
    #       x: -0.03024626593830236
    #       y: -0.21597003603427645
    #       z: 1.3427591952439457
    #     orientation: 
    #       x: -9.40264697470663e-06
    #       y: -9.408385209250267e-06
    #       z: 0.707107236099817
    #       w: 0.7071063261478787
    # - 
    #   id: 5
    #   name: "wrist_right_link1"
    #   dimensions: 
    #     x: 0.02500232124321864
    #     y: 0.02500003237701781
    #     z: 0.0250022892740267
    #   init_pose: 
    #     position: 
    #       x: 2.642546331048097e-05
    #       y: -0.21696999500623468
    #       z: 1.087000001083946
    #     orientation: 
    #       x: -3.237095902781108e-05
    #       y: -3.237672681951912e-05
    #       z: 0.7071072354211826
    #       w: 0.7071063254694311
    # - 
    #   id: 6
    #   name: "wrist_right_link2"
    #   dimensions: 
    #     x: 0.013023802451883532
    #     y: 0.013000017471528125
    #     z: 0.013001193100953934
    #   init_pose: 
    #     position: 
    #       x: 2.642546331048097e-05
    #       y: -0.21696999500623468
    #       z: 1.087000001083946
    #     orientation: 
    #       x: -3.2393260445103736e-05
    #       y: -3.235442543092536e-05
    #       z: 0.7071072354201613
    #       w: 0.7071063254704518
# - 
#       id: 8
#       name: "head_link1"
#       dimensions: 
#         x: 0.025000000000000015
#         y: 0.025000000000000015
#         z: 0.02499999999999991
#       init_pose: 
#         position: 
#           x: -8.673617379884035e-19
#           y: -2.6020852139652106e-18
#           z: 1.84075
#         orientation: 
#           x: -0.0
#           y: -0.0
#           z: 0.7071067811865476
#           w: 0.7071067811865476
#     - 
#       id: 9
#       name: "head_link2"
#       dimensions: 
#         x: 0.013000000000000008
#         y: 0.013000000000000008
#         z: 0.013022595405578485
#       init_pose: 
#         position: 
#           x: -8.673617379884035e-19
#           y: -2.6020852139652106e-18
#           z: 1.84075
#         orientation: 
#           x: -0.0
#           y: -0.0
#           z: 0.7071067811865476
#           w: 0.7071067811865476
    # - 
    #   id: 11
    #   name: "camera_left"
    #   dimensions: 
    #     x: 0.013000000000000012
    #     y: 0.013000000000000005
    #     z: 0.013022595405578485
    #   init_pose: 
    #     position: 
    #       x: 0.137
    #       y: 0.029999999999999947
    #       z: 2.04375
    #     orientation: 
    #       x: -0.0
    #       y: -0.0
    #       z: 0.7071067811865476
    #       w: 0.7071067811865476
    # - 
    #   id: 12
    #   name: "camera_right"
    #   dimensions: 
    #     x: 0.013000000000000012
    #     y: 0.013000000000000005
    #     z: 0.013022595405578485
    #   init_pose: 
    #     position: 
    #       x: 0.137
    #       y: -0.03000000000000005
    #       z: 2.04375
    #     orientation: 
    #       x: -0.0
    #       y: -0.0
    #       z: 0.7071067811865476
    #       w: 0.7071067811865476
    # - 
    #   id: 13
    #   name: "shoulder_left_link1"
    #   dimensions: 
    #     x: 0.03201403609415339
    #     y: 0.032313613986393375
    #     z: 0.03200845720624779
    #   init_pose: 
    #     position: 
    #       x: 1.2533377113932431e-16
    #       y: 0.21016999999999997
    #       z: 1.6994700000000003
    #     orientation: 
    #       x: -3.238726936629579e-07
    #       y: -3.2387269366295773e-07
    #       z: 0.7071067064149117
    #       w: 0.707106855958027
    # - 
    #   id: 14
    #   name: "shoulder_left_link2"
    #   dimensions: 
    #     x: 0.016006017678778444
    #     y: 0.015998689226096208
    #     z: 0.016080097083071454
    #   init_pose: 
    #     position: 
    #       x: 1.2533377113932431e-16
    #       y: 0.21016999999999997
    #       z: 1.6994700000000003
    #     orientation: 
    #       x: -3.237789652999664e-07
    #       y: -3.239664220457715e-07
    #       z: 0.7071067064149117
    #       w: 0.707106855958027
    # - 
    #   id: 16
    #   name: "elbow_left"
    #   dimensions: 
    #     x: 0.0679164893351795
    #     y: 0.038650008792487645
    #     z: 0.1112510536144602
    #   init_pose: 
    #     position: 
    #       x: -0.030249009834160984
    #       y: 0.2159800016189214
    #       z: 1.3427595307139004
    #     orientation: 
    #       x: -5.484871229145026e-06
    #       y: -5.485058371510238e-06
    #       z: 0.7071067633482263
    #       w: 0.7071067989823219
    # - 
    #   id: 18
    #   name: "wrist_left_link1"
    #   dimensions: 
    #     x: 0.025001223970034018
    #     y: 0.02500000126642038
    #     z: 0.025001222716804605
    #   init_pose: 
    #     position: 
    #       x: 1.4016761209732125e-05
    #       y: 0.21700000016162893
    #       z: 1.087000000373657
    #     orientation: 
    #       x: -1.7292062781569622e-05
    #       y: -1.7292249328920604e-05
    #       z: 0.70710676315806
    #       w: 0.7071067987921584
    # - 
    #   id: 19
    #   name: "wrist_left_link2"
    #   dimensions: 
    #     x: 0.013000636464407377
    #     y: 0.013000000869527073
    #     z: 0.01300063602372692
    #   init_pose: 
    #     position: 
    #       x: 1.4016761209732125e-05
    #       y: 0.21700000016162893
    #       z: 1.087000000373657
    #     orientation: 
    #       x: -1.72863246525639e-05
    #       y: -1.7297987458215494e-05
    #       z: 0.7071067631582003
    #       w: 0.7071067987920181